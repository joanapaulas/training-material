<!DOCTYPE html>
<html lang="en">
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Galaxy Training!</title>
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap.min.css?v=3">
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=2">
        <link rel="stylesheet" href="/training-material/assets/css/font-awesome.css">
        <link rel="stylesheet" href="/training-material/assets/css/academicons.css">
        <link rel="stylesheet" href="/training-material/assets/css/syntax_highlighting.css">
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon">
    </head>
    <body>
        




<header>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                Galaxy Training!
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/training-material/topics/admin" title="Go back to list of tutorials">
                            <i class="fa fa-folder-o" aria-hidden="true"></i> Galaxy Server administration
                        </a>
                    </li>

                    
                        
                        
                        
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Introduction slides">
                                    <i class="fa fa-slideshare" aria-hidden="true"></i> Introduction slides
                                </a>
                                <div class="dropdown-menu">
                                    
                                        
                                            
                                                <a class="dropdown-item" href="/training-material/topics/admin/slides/introduction.html">
                                                    Galaxy from an administrator point of view
                                                </a>
                                            
                                        
                                    
                                        
                                            
                                        
                                    
                                        
                                            
                                        
                                    
                                        
                                            
                                        
                                    
                                        
                                            
                                        
                                    
                                        
                                    
                                        
                                            
                                        
                                    
                                        
                                            
                                        
                                    
                                        
                                            
                                        
                                    
                                </div>
                            </li>
                        
                    

                    
                        <li class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Where to run the tutorial">
                                <i class="fa fa-cog" aria-hidden="true"></i> Galaxy Instances
                            </a>
                            <div class="dropdown-menu">
                                
                                    <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/tree/master/topics/admin/docker" title="Docker image for this tutorial">
                                        <i class="fa fa-ship" aria-hidden="true"></i> Docker image
                                    </a>
                                
                                
                                
                            </div>
                        </li>
                    

                    

                    

                    

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="fa fa-life-ring" aria-hidden="true"></i> Help
    </a>
    <div class="dropdown-menu">
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Chat on Gitter">
            Gitter
        </a>
        <a class="dropdown-item" href="https://biostar.usegalaxy.org/" title="Ask on Biostars">
            Biostars
        </a>
    </div>
</li>


                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/galaxyproject/training-material/tree/master/topics/admin/tutorials/dev-to-production/tutorial.md">
                            <i class="fa fa-github" aria-hidden="true"></i> Edit
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div class="container main-content">
    <section class="tutorial">
        <h1>Move from dev instance to production instance</h1>

        <blockquote class="overview">
            <h3>Overview</h3>

            <strong><i class="fa fa-question-circle" aria-hidden="true"></i> Questions</strong>
            <ul>
            
            <li>
            
            </li>
</ul>

            <strong><i class="fa fa-bullseye" aria-hidden="true"></i> Objectives</strong>
            <ul>
            
            <li>
            
            </li>
</ul>

            

            <p><strong><i class="fa fa-hourglass-end" aria-hidden="true"></i> Time estimation:</strong> 1d/3h/6h</p>
        </blockquote>

        <h1 id="move-from-dev-instance-to-production-instance">Move from dev instance to production instance</h1>

<p><img class="emoji" title=":grey_question:" alt=":grey_question:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/2754.png" height="20" width="20" align="absmiddle"> <strong><em>Questions</em></strong></p>

<ul>
  <li><em>Why do I need to configure Galaxy for production ?</em></li>
  <li><em>How to run a galaxy in a production environment ?</em></li>
</ul>

<p><img class="emoji" title=":dart:" alt=":dart:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f3af.png" height="20" width="20" align="absmiddle"> <strong><em>Objectives</em></strong></p>

<ul>
  <li><em>Learn to install a Galaxy server.</em></li>
  <li>
<em>Upgrade a basic galaxy installation to a production environment</em>.</li>
  <li><em>Get a basic understanding of entry points in the main galaxy configuration file.</em></li>
</ul>

<p><img class="emoji" title=":heavy_check_mark:" alt=":heavy_check_mark:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/2714.png" height="20" width="20" align="absmiddle"> <strong><em>Requirements</em></strong></p>

<ul>
  <li><em><a href="/training-material/topics/admin">Galaxy Server Administration</a></em></li>
</ul>

<p><img class="emoji" title=":hourglass:" alt=":hourglass:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/231b.png" height="20" width="20" align="absmiddle"> <strong><em>Time estimation</em></strong> <em>TODO</em></p>

<h1 id="introduction">Introduction</h1>

<p>In this tutorial you will learn to install and configure a galaxy instance.
The basic installation instructions are suitable for developpement only.
For setting up a Galaxy for a multi-user production environment additonal steps are necessary.
After a basic installation, this tutorial present the main steps for moving from a basic installation to a production environment.</p>

<p><img src="../../images/scheme-dev_to_production.png" alt="Flowchart of the processes of configuring galaxy for a production environment. After the basic installation the developer settings should be disabled. The next steps are to switch to a database server and use proxy server. A compute cluster should be used. The following would be to clean up database and rotate log files. Check the local data and enable upload via FTP and the galaxy instance is ready for the production." style="width: 600px;"></p>

<h1 id="basic-installation">Basic Installation</h1>

<h2 id="clone-it-and-run-it">Clone it and run it</h2>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<p>Galaxy’s source code is hosted in a <a href="https://github.com/galaxyproject/galaxy">GitHub</a> repository.</p>

<p>To get the code run:</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>git clone -b release_16.07 https://github.com/galaxyproject/galaxy.git
</code></pre>
</div>

<p>To start the galaxy go to the galaxy directory and run:</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>sh run.sh
</code></pre>
</div>

<p>This will start up the server on localhost and port 8080, so Galaxy can be accessed from your web browser at http://localhost:8080 .</p>

<p>Galaxy’s server will start printing its output to your terminal. To stop the Galaxy server, just hit Ctrl-c in the terminal from which Galaxy is running.</p>

<h2 id="access-galaxy-over-the-network">Access Galaxy over the network</h2>
<p>In the basic installation Galaxy is bind to the loopback interface.
To bind Galaxy to any avalaible network interface edit the config/galaxy.ini file and change the host setting to:</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>host = 0.0.0.0
</code></pre>
</div>

<h2 id="what-did-you-just-installed-">What did you just installed ?</h2>
<p>The galaxy you have just installed is configured with the following:</p>

<ul>
  <li>
<a href="https://www.sqlite.org/">SQLite</a>: a servless database.</li>
  <li>A built-in HTTP server, written in Python.</li>
</ul>

<p>The tools are run locally and the galaxy server itself run in a single process.</p>

<h2 id="usefull-things-to-know-">Usefull things to know …</h2>

<ul>
  <li>The command: git clone -b release_16.07 https://github.com/galaxyproject/galaxy.git</li>
</ul>

<p><em>We use the “-b” option to clone a specific branch of the repository.
In the example above we clone the branch release_16.07 because the lastest release is 16.07.
A new version of Galaxy is released every 3 months.
It is strongly encouraged to run this tutorial with the latest release.
See the <a href="https://github.com/galaxyproject/galaxy">GitHub</a> repository to get the latest one.</em></p>

<ul>
  <li>Galaxy configuration filenames</li>
</ul>

<p><em>In the config/ directory all the files are suffixed with “.sample”.
Sample files are default files provided by Galaxy.
When you change a configuration it is strongly encouraged to work directly on a filename without the ‘sample’ suffix.
So, go ahead save the ‘galaxy.ini.sample’ and create a ‘galaxy.ini’</em></p>

<h2 id="whats-next-">What’s next ?</h2>
<p>Next, you will configure your Galaxy server for production.
The first thing to do is to disable the developer settings.</p>

<h1 id="disable-developer-settings">Disable developer settings.</h1>
<p>As previously mentionned the basic installation is for development only.
A set of option are usefull for development but become irrelevant for production:</p>

<ul>
  <li>
    <p>debug:</p>

    <p>debug = False</p>
  </li>
</ul>

<p>Setting debug to False disable middleware that loads the entire response in memory for displaying debugging information in the page.
If left enabled, the proxy server may timeout waiting for a response or your Galaxy process may run out of memory if it’s serving large files.</p>

<ul>
  <li>
    <p>use_interactive:</p>

    <p>use_interactive = False</p>
  </li>
</ul>

<p>Setting use_interactive to false disable displaying and live debugging of tracebacks via the web.
Leaving it enabled will expose your configuration (database password, id_secret, etc.).</p>

<ul>
  <li>filter-with:</li>
</ul>

<h2 id="subpart-1">Subpart 1</h2>

<p>Short introduction about this subpart.</p>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<ol>
  <li>First step</li>
  <li>Second step</li>
  <li>Third step</li>
</ol>

<h2 id="subpart-2">Subpart 2</h2>

<p>Short introduction about this subpart.</p>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<ol>
  <li>First step</li>
  <li>Second step</li>
  <li>Third step</li>
</ol>

<p>Some blabla</p>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<ol>
  <li>First step</li>
  <li>Second step</li>
  <li>Third step</li>
</ol>

<h1 id="part-2">Part 2</h1>

<p>Short introduction about this subpart.</p>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<ol>
  <li>First step</li>
  <li>Second step</li>
  <li>Third step</li>
</ol>

<h2 id="subpart-2-1">Subpart 2</h2>

<p>Short introduction about this subpart.</p>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<ol>
  <li>First step</li>
  <li>Second step</li>
  <li>Third step</li>
</ol>

<p>Some blabla</p>

<p><i class="fa fa-pencil" aria-hidden="true"></i> <strong><em>Hands on!</em></strong></p>

<ol>
  <li>First step</li>
  <li>Second step</li>
  <li>Third step</li>
</ol>

<h1 id="conclusion">Conclusion</h1>

<p>Conclusion about the technical key points. And then relation between the technics and the biological question to end with a global view.</p>

<p><img class="emoji" title=":grey_exclamation:" alt=":grey_exclamation:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/2755.png" height="20" width="20" align="absmiddle"> <strong><em>Key Points</em></strong></p>

<ul>
  <li><em>Simple sentence to sum up the first key point of the tutorial (Take home message)</em></li>
  <li><em>Second key point</em></li>
  <li><em>Third key point</em></li>
  <li><em>…</em></li>
</ul>

<h1 id="clap-thank-you">
<img class="emoji" title=":clap:" alt=":clap:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f44f.png" height="20" width="20" align="absmiddle"> Thank you</h1>


        
        <blockquote class="key_points">
            <h3>
<i class="fa fa-key" aria-hidden="true"></i> Key points</h3>

            <ul>
                
                <li>
                
            </li>
</ul>
        </blockquote>
        

        

        <h3>
<i class="fa fa-thumbs-up" aria-hidden="true"></i> Congratulations on successfully completing this tutorial!</h3>

        <hr>

        <blockquote class="overview">
            <h3>
<i class="fa fa-comments-o" aria-hidden="true"></i> Help us improve this content!</h3>
            Please take a moment to fill in the Galaxy Training Network
            <a href="https://tinyurl.com/GTNfeedback">Feedback Form</a>.
            Your feedback helps us improve this tutorial and will be considered
            in future revisions.
        </blockquote>
    </section>
</div>


<footer>
    <div class="container">
        <p>
            This material is the result of a collaborative work. Thanks to the
            <a href="https://wiki.galaxyproject.org/Teach/GTN">Galaxy Training Network</a>
            and all the <a href="/training-material/hall-of-fame">contributors</a> (Hans-Rudolf Hotz)!
        </p>
        <p>
            Found a typo? Something is wrong in this tutorial? Edit it on
            <a href="https://github.com/galaxyproject/training-material/tree/master/topics/admin/tutorials/dev-to-production/tutorial.md">GitHub</a>.
        </p>
    </div>
</footer>

    </body>
    <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap.min.js?v=3"></script>
    <script type="text/javascript" src="/training-material/assets/js/details-element-polyfill.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="/training-material/assets/js/main.js"></script>
</html>
